{% set backlink = "/" %}
{% extends "layout.html" %}
{% block header %}

	<link rel="stylesheet" href="{{ url_for('static', filename='css/job_details.css') }}">

    <link rel="stylesheet" href="//statgen.github.io/locuszoom/versions/0.3.10/locuszoom.css"/>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.16/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-tip/0.6.7/d3-tip.min.js"></script>

    <script type="text/javascript" src="{{ url_for('static', filename='js/plot.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/job_details.js') }}"></script>
	<script type="text/javascript">
		job_id = "{{ job.id }}";
	</script>
	<style>
		svg .variant_points a {cursor: pointer}
	</style>

{% endblock %}
{% block content %}
        <div class="section">
            <div class="section-title">
                <h2>Job Details</h2>
                {% if job.status == "queued" or job.status == "started" %}
                <button name="cancel_job">Cancel Job</button>
                {% endif %}
            </div>
            <table id="job_details_table">
                <tr>
                    <th>Job Name</th>
                    <td>{{ job.name }}</td>
                </tr>
                <tr>
                    <th>Status</th>
                    <td>{{ job.status }}</td>
                </tr>
                {% if job.error_message %}
                <tr>
                    <th>Error Message</th>
                    <td>{{ job.error_message }}</td>
                </tr>
                {% endif %}
                <tr>
                    <th>Date Created</th>
                    <td>{{ job.creation_date }}</td>
                </tr>
                <tr>
                    <th>Last Updated</th>
                    <td>{{ job.modified_date }}</td>
                </tr>
            </table>
        </div>

        {% if job.status == "succeeded" %}
        <form class="section" action="/jobs/{{ job.id }}/output">
            <button type="submit">Download Output</button>
        </form>

        <div class="section">

            <ul class="tabs">
                <li class="active" rel="tab1">Manhattan</li>
                <li rel="tab2">QQPlot</li>
            </ul>
            <div class="tab-container">

                <div id="tab1" class="tab-content">
                    <!--<object data="/jobs/{{ job.id }}/plots/tmp-manhattan" type="application/pdf" height="600px" width="100%">
                        alt : <a href="/jobs/{{ job.id }}/plots/tmp-manhattan">manhattan.pdf</a>
                    </object>-->

                </div>
                <div id="tab2" class="tab-content">
                    <!--<object data="/jobs/{{ job.id }}/plots/tmp-qq" type="application/pdf" height="600px" width="100%">
                        alt : <a href="/jobs/{{ job.id }}/plots/tmp-manhattan">qq.pdf</a>
                    </object>-->
                </div>

            </div>
        </div>
        {% endif %}

{% endblock %}
